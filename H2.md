# H2 Soitto kotiin
## x) Lue ja tiivistä
**Two Machine Virtual Network With Debian 11 Bullseye and Vagrant (Karvinen 2021)**
* Vagrantin asennus Debian ja Ubuntu järjestelmissä tapahtuu komentorivin kautta. Windows ja Mac järjestelmissä lataa erillinen asennustiedosto.
* Luo projektillesi uusi hakemisto ja luo sinne "Vagrantfile". Määrittele "Vagrantfileen" asetukset kahdelle virtuaalikoneelle.
* Virtuaalikoneisiin voi yhdistyä ssh kautta ja on hyvä tarkistaa yhteyksien toimivuus esim ping komennolla.
* Virtuaalikoneiden poistaminen ja luonti vagrant destroy ja up komennoilla mahdollistaa helpon harjoittelun.
* IP-osoitteiden kanssa tulee joskus ongelmia ja silloin kannattaa tarkistaa kuuluuko valitsemasi osoite sallittuun alueeseen.

**Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux (Karvinen 2018)**
* Master asennus: Päivitä pakettivarastot ja asenna salt-master, tarkista tämän jälkeen IP-osoite.
* Slave asennus: Päivitä pakettivarastot ja asenna salt-minion. Aseta tämän jälkeen minionille id ja lisää masterin IP-osoite ja käynnistä salt-minion uudelleen yhdistämistä varten.
* Hyväksy Slave-avain Masterilla sudo salt-key -A.
* Testaa vastaako Slave Masterille.
* Lopuksi voit harjoitella erilaisilla komennoilla.

**Salt Vagrant - automatically provision one master and two slaves (Karvinen 2023)**
* Luo hakemisto /hello, jonne luodaan tiedosto init.sls. Tiedostossa init.sls voit määritellä virtuaalikoneesi tilan YAML-muodossa.
* Top filen avulla pystyt asettamaan samanaikaisesti haluamillesi orjakoneille tarvitsemasi tilan.

## a) Hello Vagrant!
* Asensin vagrantin windowsille.
* Latasin asennusohjelman heidän sivuilta: https://developer.hashicorp.com/vagrant/install?product_intent=vagrant#windows
* Seurasin asennusohjelman ohjeita ja asennus onnistui.
* Varmistin asennuksen onnistumisen kirjoittamalla komentoriville `vagrant --version`:

![image](https://github.com/user-attachments/assets/cde0f4b2-780c-47a4-9f93-23f5a682f561)

## b) Linux Vagrant
* Loin `mkdir ekakone` komennolla hakemiston ensimmäiselle virtuaalikoneelleni.
* 
## c) Kaksin kaunihimpi
* Aloitin tekemällä virtuaalikoneilleni oman hakemiston nimeltä "vagrantprojekti". Tein sen `mkdir vagrantprojekti` komennolla.

![image](https://github.com/user-attachments/assets/4e164d4d-6f29-4851-a4e6-ccd55907b0d3)
* Sitten siirryin kyseiseen hakemistoon komennolla `cd vagrantprojekti`, jonka jälkeen käytin komentoa `vagrant init` luodakseni hakemistoon tiedoston vagrantfile. 
* Muokkasin notepadilla vagrantfile tiedostoa ja lisäsin sinne haluamani asetukset:

![image](https://github.com/user-attachments/assets/4484674e-3028-418a-838c-fd870fe7cf68)

* Asetuksista näkee, että olen luomassa kaksi virtuaalikonetta: t001 ja t002
* Sitten tuli aika luoda itse koneet. Tämän tein komennolla `vagrant up`:

![image](https://github.com/user-attachments/assets/3cdccd61-6e32-4771-951d-40df484f5106)
* Lopuksi tarkistin että koneet ovat käynnissä `vagrant status` komennolla: 

![image](https://github.com/user-attachments/assets/91c1b34e-a7a8-448a-bee4-225f790ec9a3)

* Seuraavaksi halusin kokeilla, että luomani kaksi virtuaalikonetta pystyvät pingata toisiaan.
* Aloitin yhdistymällä t001 koneeseen ssh välityksellä, komennolla `vagrant ssh t001`:

![image](https://github.com/user-attachments/assets/0c550527-26c6-49ef-9349-b6b3f652adcd)
* Yhdistyttyäni pingasin t002 konetta onnistuneesti:

![image](https://github.com/user-attachments/assets/cc63d10f-ec8e-415e-950e-29407fdfdc4f)
* Sitten poistuin t001 koneesta `exit` komennolla, yhdistyin t002 koneeseen ja suoritin pingauksen onnistuneesti:

![image](https://github.com/user-attachments/assets/7bd4afb0-8df6-4287-a8ed-b260da3eabaa)

